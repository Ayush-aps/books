<%- include('../partials/header') %>

<div class="container mx-auto px-4">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">Upload New Book</h1>
    <a href="/seller/inventory" class="text-primary hover:text-dark">
      <i class="fas fa-arrow-left mr-1"></i> Back to Inventory
    </a>
  </div>
  
  <div class="bg-white rounded-lg shadow-md p-6">
    <div class="mb-6">
      <div class="flex items-center mb-4">
        <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center mr-2">
          <span class="text-dark font-bold">1</span>
        </div>
        <h2 class="text-xl font-semibold">Book Information</h2>
      </div>
      
      <form action="/seller/upload" method="POST" class="space-y-6" id="upload-form">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="title" class="block text-sm font-medium text-gray-700 mb-1">Title *</label>
            <input type="text" id="title" name="title" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
          </div>
          
          <div>
            <label for="author" class="block text-sm font-medium text-gray-700 mb-1">Author *</label>
            <input type="text" id="author" name="author" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
          </div>
          
          <div>
            <label for="isbn" class="block text-sm font-medium text-gray-700 mb-1">ISBN *</label>
            <input type="text" id="isbn" name="isbn" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
            <p class="text-xs text-gray-500 mt-1">Enter the 10 or 13 digit ISBN number</p>
          </div>
          
          <div>
            <label for="publisher" class="block text-sm font-medium text-gray-700 mb-1">Publisher *</label>
            <input type="text" id="publisher" name="publisher" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
          </div>
          
          <div>
            <label for="publishedDate" class="block text-sm font-medium text-gray-700 mb-1">Published Date</label>
            <input type="date" id="publishedDate" name="publishedDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
          </div>
          
          <div>
            <label for="language" class="block text-sm font-medium text-gray-700 mb-1">Language</label>
            <select id="language" name="language" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
              <option value="English">English</option>
              <option value="Hindi">Hindi</option>
              <option value="Tamil">Tamil</option>
              <option value="Telugu">Telugu</option>
              <option value="Bengali">Bengali</option>
              <option value="Marathi">Marathi</option>
              <option value="Gujarati">Gujarati</option>
              <option value="Kannada">Kannada</option>
              <option value="Malayalam">Malayalam</option>
              <option value="Punjabi">Punjabi</option>
              <option value="Other">Other</option>
            </select>
          </div>
          
          <div>
            <label for="pageCount" class="block text-sm font-medium text-gray-700 mb-1">Page Count</label>
            <input type="number" id="pageCount" name="pageCount" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
          </div>
          
          <div>
            <label for="genres" class="block text-sm font-medium text-gray-700 mb-1">Genres *</label>
            <select id="genres" name="genres" multiple required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary" size="5">
              <option value="Fiction">Fiction</option>
              <option value="Non-Fiction">Non-Fiction</option>
              <option value="Mystery">Mystery</option>
              <option value="Thriller">Thriller</option>
              <option value="Romance">Romance</option>
              <option value="Science Fiction">Science Fiction</option>
              <option value="Fantasy">Fantasy</option>
              <option value="Horror">Horror</option>
              <option value="Biography">Biography</option>
              <option value="Autobiography">Autobiography</option>
              <option value="History">History</option>
              <option value="Self-Help">Self-Help</option>
              <option value="Business">Business</option>
              <option value="Children">Children</option>
              <option value="Young Adult">Young Adult</option>
              <option value="Poetry">Poetry</option>
              <option value="Travel">Travel</option>
              <option value="Cooking">Cooking</option>
              <option value="Art">Art</option>
              <option value="Religion">Religion</option>
              <option value="Philosophy">Philosophy</option>
            </select>
            <p class="text-xs text-gray-500 mt-1">Hold Ctrl (or Cmd) to select multiple genres</p>
          </div>
          
          <div class="md:col-span-2">
            <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
            <textarea id="description" name="description" rows="5" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary"></textarea>
          </div>
        </div>
        
        <div class="border-t border-gray-200 pt-6 mt-6">
          <div class="flex items-center mb-4">
            <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center mr-2">
              <span class="text-dark font-bold">2</span>
            </div>
            <h2 class="text-xl font-semibold">Pricing & Inventory</h2>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div>
              <label for="price" class="block text-sm font-medium text-gray-700 mb-1">Price (₹) *</label>
              <input type="number" id="price" name="price" min="0" step="0.01" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
            </div>
            
            <div>
              <label for="discountPrice" class="block text-sm font-medium text-gray-700 mb-1">Discount Price (₹)</label>
              <input type="number" id="discountPrice" name="discountPrice" min="0" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
            </div>
            
            <div>
              <label for="stock" class="block text-sm font-medium text-gray-700 mb-1">Stock Quantity *</label>
              <input type="number" id="stock" name="stock" min="0" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
            </div>
          </div>
        </div>
        
        <div class="border-t border-gray-200 pt-6 mt-6">
          <div class="flex items-center mb-4">
            <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center mr-2">
              <span class="text-dark font-bold">3</span>
            </div>
            <h2 class="text-xl font-semibold">Book Details</h2>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="condition" class="block text-sm font-medium text-gray-700 mb-1">Condition *</label>
              <select id="condition" name="condition" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                <option value="new">New</option>
                <option value="used">Used</option>
              </select>
            </div>
            
            <div>
              <label for="format" class="block text-sm font-medium text-gray-700 mb-1">Format *</label>
              <select id="format" name="format" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                <option value="hardcover">Hardcover</option>
                <option value="paperback">Paperback</option>
                <option value="ebook">E-Book</option>
                <option value="audiobook">Audiobook</option>
              </select>
            </div>
            
            <div class="md:col-span-2">
              <label for="coverImage" class="block text-sm font-medium text-gray-700 mb-1">Cover Image</label>
              <div class="flex items-center">
                <div class="w-32 h-40 bg-gray-100 border border-gray-300 rounded-md flex items-center justify-center mr-4">
                  <i class="fas fa-image text-gray-400 text-3xl"></i>
                </div>
                <div>
                  <input type="file" id="coverImage" name="coverImage" accept="image/*" class="hidden">
                  <button type="button" id="upload-image-btn" class="bg-gray-200 text-dark px-4 py-2 rounded-md hover:bg-gray-300 transition">
                    <i class="fas fa-upload mr-1"></i> Upload Image
                  </button>
                  <p class="text-xs text-gray-500 mt-1">Max file size: 5MB. Recommended size: 600x900px</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="border-t border-gray-200 pt-6 mt-6">
          <div class="flex justify-end space-x-4">
            <button type="button" id="preview-btn" class="bg-white text-dark px-6 py-3 rounded-md border border-dark hover:bg-gray-100 transition">
              Preview
            </button>
            <button type="submit" class="bg-primary text-dark px-6 py-3 rounded-md hover:bg-opacity-90 transition">
              Submit for Approval
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const uploadImageBtn = document.getElementById('upload-image-btn');
    const coverImageInput = document.getElementById('coverImage');
    const previewBtn = document.getElementById('preview-btn');
    const uploadForm = document.getElementById('upload-form');
    
    // Handle image upload button
    uploadImageBtn.addEventListener('click', function() {
      coverImageInput.click();
    });
    
    // Display selected image
    coverImageInput.addEventListener('change', function() {
      if (this.files && this.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const imageContainer = uploadImageBtn.parentElement.previousElementSibling;
          imageContainer.innerHTML = `<img src="${e.target.result}" alt="Book Cover" class="w-32 h-40 object-cover rounded-md">`;
        }
        reader.readAsDataURL(this.files[0]);
      }
    });
    
    // Form validation
    uploadForm.addEventListener('submit', function(e) {
      const requiredFields = uploadForm.querySelectorAll('[required]');
      let isValid = true;
      
      requiredFields.forEach(field => {
        if (!field.value) {
          isValid = false;
          field.classList.add('border-red-500');
        } else {
          field.classList.remove('border-red-500');
        }
      });
      
      if (!isValid) {
        e.preventDefault();
        alert('Please fill in all required fields');
      }
    });
    
    // Preview button
    previewBtn.addEventListener('click', function() {
      // In a real implementation, this would show a modal with a preview
      alert('Preview functionality would be implemented here');
    });
  });
</script>

<%- include('../partials/footer') %>

